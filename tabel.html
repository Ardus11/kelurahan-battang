<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabel Penduduk Kelurahan Battang</title>
    <style>
        /* Mengatur dasar tampilan halaman */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        h1 {
            text-align: center;
            color: #333;
            font-size: 2.5em;
            margin-bottom: 30px;
        }

        /* Mengatur tabel */
        table {
            width: 50%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            padding: 9px;
            text-align: center;
            border: 1px solid #ddd;
        }

        th {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }

        td {
            background-color: #f9f9f9;
        }

        tr:nth-child(even) td {
            background-color: #f2f2f2;
        }

        tr:hover {
            background-color: #ddd;
        }

        .header-group {
            background-color: #7dbb4d;
            color: white;
            text-align: center;
            font-weight: bold;
        }

        .total-row {
            background-color: #f0e68c;
        }
         /* Styling untuk tombol Edit, Save, Cancel */
         .action-buttons {
            position: relative;
            text-align: right;
            margin-top: 5px;
            margin-bottom: 5px;
        }
        .action-buttons button {
            padding: 10px 15px;
            margin-left: 10px;
            border: none;
            background-color: #c56923;
            color: white;
            font-size: 1rem;
            cursor: pointer;
            border-radius: 10px;
        }
        .action-buttons button:hover {
            background-color: #7777e4;
        }
        .action-buttons .cancel-btn {
            background-color: #c56923;
        }
        .action-buttons .cancel-btn:hover {
            background-color: #7777e4;
        }

        .action-buttons .save-btn {
            background-color: #c56923;
        }
        .action-buttons .save-btn:hover {
            background-color: #7777e4;
        }
        /* Styling untuk tabel agama */
        #agamaTable {
            width: 60%;
            border-collapse: collapse;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        #agamaTable th, #agamaTable td {
            padding: 8px;
            text-align: center;
            border: 1px solid #ddd;
        }

        #agamaTable th {
            background-color: #4CAF50;
            color: white;
        }

        #agamaTable tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        #agamaTable tr:hover {
            background-color: #ddd;
        }

    
    </style>
</head>
<body>
    <h2 id="tanggal-update"></h2>

    <div class="container">
        <table id="pendudukTable">
            <thead>
                <tr>
                    <th rowspan="2">No</th>
                    <th rowspan="2">RW</th>
                    <th rowspan="2">RT</th>
                    <th rowspan="2">KK</th>
                    <th colspan="3" class="header-group">Penduduk Awal</th>
                    <th colspan="3" class="header-group">Lahir</th>
                    <th colspan="3" class="header-group">Meninggal</th>
                    <th colspan="3" class="header-group">Datang</th>
                    <th colspan="3" class="header-group">Pindah</th>
                    <th colspan="3" class="header-group">Penduduk Akhir Bulan</th>
                </tr>
                <tr>
                    <th>L</th>
                    <th>P</th>
                    <th>L+P</th>
                    <th>L</th>
                    <th>P</th>
                    <th>L+P</th>
                    <th>L</th>
                    <th>P</th>
                    <th>L+P</th>
                    <th>L</th>
                    <th>P</th>
                    <th>L+P</th>
                    <th>L</th>
                    <th>P</th>
                    <th>L+P</th>
                    <th>L</th>
                    <th>P</th>
                    <th>L+P</th>
                </tr>
            </thead>
            <tbody>
                <!-- RW I -->
                <tr>
                    <td rowspan="2">1</td>
                    <td rowspan="2">I</td>
                    <td>1</td>
                    <td>80</td>
                    <td>122</td>
                    <td>149</td>
                    <td>271</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>1</td>
                    <td>1</td>
                    <td>122</td>
                    <td>148</td>
                    <td>270</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>49</td>
                    <td>93</td>
                    <td>85</td>
                    <td>178</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>93</td>
                    <td>85</td>
                    <td>178</td>
                </tr>
                <!-- RW II -->
                <tr>
                    <td rowspan="2">2</td>
                    <td rowspan="2">II</td>
                    <td>1</td>
                    <td>43</td>
                    <td>64</td>
                    <td>63</td>
                    <td>127</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>64</td>
                    <td>63</td>
                    <td>127</td>
                </tr>
                <tr>
                    <td>2</td>  
                    <td>61</td>
                    <td>88</td>
                    <td>105</td>
                    <td>193</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>88</td>
                    <td>105</td>
                    <td>193</td>
                </tr>
                <!-- RW III -->
                <tr>
                    <td rowspan="2">3</td>
                    <td rowspan="2">III</td>
                    <td>1</td>
                    <td>42</td>
                    <td>69</td>
                    <td>63</td>
                    <td>132</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>69</td>
                    <td>63</td>
                    <td>132</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>20</td>
                    <td>51</td>
                    <td>41</td>
                    <td>92</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>51</td>
                    <td>41</td>
                    <td>92</td>
                </tr>
                <!-- RW IV -->
                <tr>
                    <td rowspan="2">4</td>
                    <td rowspan="2">IV</td>
                    <td>1</td>
                    <td>58</td>
                    <td>89</td>
                    <td>81</td>
                    <td>170</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>89</td>
                    <td>81</td>
                    <td>170</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>58</td>
                    <td>84</td>
                    <td>92</td>
                    <td>176</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>1</td>
                    <td>1</td>
                    <td>1</td>
                    <td>2</td>
                    <td>3</td>
                    <td>2</td>
                    <td>1</td>
                    <td>3</td>
                    <td>83</td>
                    <td>92</td>
                    <td>175</td>
                </tr>
                <!-- RW V -->
                <tr>
                    <td rowspan="2">5</td>
                    <td rowspan="2">V</td>
                    <td>1</td>
                    <td>57</td>
                    <td>106</td>
                    <td>101</td>
                    <td>207</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>1</td>
                    <td>0</td>
                    <td>1</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>107</td>
                    <td>101</td>
                    <td>208</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>63</td>
                    <td>126</td>
                    <td>106</td>
                    <td>232</td>
                    <td>1</td>
                    <td>0</td>
                    <td>1</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>0</td>
                    <td>127</td>
                    <td>106</td>
                    <td>233</td>
                </tr>

                <!-- Baris Total -->
                <tr class="total-row">
                    <td colspan="3"><strong>TOTAL</strong></td>
                    <td><strong>531</strong></td>
                    <td><strong>892</strong></td>
                    <td><strong>886</strong></td>
                    <td><strong>1778</strong></td>
                    <td><strong>1</strong></td>
                    <td><strong>0</strong></td>
                    <td><strong>1</strong></td>
                    <td><strong>0</strong></td>
                    <td><strong>1</strong></td>
                    <td><strong>1</strong></td>
                    <td><strong>2</strong></td>
                    <td><strong>2</strong></td>
                    <td><strong>4</strong></td>
                    <td><strong>2</strong></td>
                    <td><strong>2</strong></td>
                    <td><strong>4</strong></td>
                    <td><strong>893</strong></td>
                    <td><strong>885</strong></td>
                    <td><strong>1778</strong></td>
                </tr>
            </tbody>
        </table>
 <!-- Tombol Edit, Save, Cancel -->
 <div class="action-buttons">
    <button id="editBtn" onclick="enableEditing()">Edit</button>
    <button id="saveBtn" class="save-btn" onclick="saveChanges()" disabled>Save</button>
    <button id="cancelBtn" class="cancel-btn" onclick="cancelChanges()" disabled>Cancel</button>
</div>
</div>
 <!-- Tabel Jumlah Penduduk Menurut Agama Yang Dianut -->
 <div class="container">
    <h2> Data Penduduk Menurut Agama Yang Dianut</h2>
    <table id="agamaTable">
        <thead>
            <tr>
                <th>No</th>
                <th>Agama</th>
                <th>KK</th>
                <th>L</th>
                <th>P</th>
                <th>Jumlah</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>ISLAM</td>
                <td>518</td>
                <td>865</td>
                <td>872</td>
                <td>1737</td>
            </tr>
            <tr>
                <td>2</td>
                <td>KRISTEN PROTESTAN</td>
                <td>13</td>
                <td>28</td>
                <td>13</td>
                <td>41</td>
            </tr>
            <tr>
                <td>3</td>
                <td>KRISTEN KATOLIK</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
            <tr>
                <td>4</td>
                <td>HINDU</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
            <tr>
                <td>5</td>
                <td>BUDHA</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
            <tr>
                <td>6</td>
                <td>PENGANUT KEPERCAYAAN</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
                <td>0</td>
            </tr>
        </tbody>
    </table>
</div>
<script>
    function updateTanggal() {
            const bulan = ["Januari", "Februari", "Maret", "April", "Mei", "Juni", "Juli", "Agustus", "September", "Oktober", "November", "Desember"];
            const tanggal = new Date();
            const namaBulan = bulan[tanggal.getMonth()];
            const tahun = tanggal.getFullYear();
            document.getElementById("tanggal-update").innerText = `Data Penduduk Update Bulan ${namaBulan} ${tahun}`;
        }
        updateTanggal();
// Menyimpan keadaan tabel
let originalData = [];

// Fungsi untuk mengaktifkan mode edit
function enableEditing() {
    let table = document.getElementById("pendudukTable");
    let rows = table.rows;

    // Menyimpan data asli untuk membatalkan perubahan
    originalData = [];
    for (let i = 1; i < rows.length; i++) { // skip header & total row
        let row = rows[i];
        let rowData = [];
        for (let j = 0; j < row.cells.length; j++) {
            rowData.push(row.cells[j].innerText);
        }
        originalData.push(rowData);
    }

    // Mengaktifkan edit untuk setiap sel
    for (let i = 1; i < rows.length; i++) {
        let row = rows[i];
        for (let j = 0; j < row.cells.length; j++) {
            row.cells[j].contentEditable = true;
        }
    }
 // Menampilkan tombol Save dan Cancel
 document.getElementById("saveBtn").disabled = false;
            document.getElementById("cancelBtn").disabled = false;
            document.getElementById("editBtn").disabled = true;
        }

        // Fungsi untuk menyimpan perubahan
        function saveChanges() {
            let table = document.getElementById("pendudukTable");
            let rows = table.rows;

            // Menyimpan data baru dan menonaktifkan mode edit
            for (let i = 1; i < rows.length; i++) {
                let row = rows[i];
                for (let j = 0; j < row.cells.length; j++) {
                    row.cells[j].contentEditable = false;
                }
            }

            // Menyembunyikan tombol Save dan Cancel
            document.getElementById("saveBtn").disabled = true;
            document.getElementById("cancelBtn").disabled = true;
            document.getElementById("editBtn").disabled = false;
        }

        // Fungsi untuk membatalkan perubahan
        function cancelChanges() {
            let table = document.getElementById("pendudukTable");
            let rows = table.rows;

            // Mengembalikan data ke keadaan semula
            for (let i = 1; i < rows.length; i++) {
                let row = rows[i];
                for (let j = 0; j < row.cells.length; j++) {
                    row.cells[j].innerText = originalData[i - 1][j];
                    row.cells[j].contentEditable = false;
                }
            }

            // Menyembunyikan tombol Save dan Cancel
            document.getElementById("saveBtn").disabled = true;
            document.getElementById("cancelBtn").disabled = true;
            document.getElementById("editBtn").disabled = false;
        }
    </script>

</body>
</html>
